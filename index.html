<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Form Verlap II-3 - BSPS</title>
  <style>
    :root {
      --primary: #004953;   /* Midnight Green */
      --accent: #C3B091;    /* Khaki */
      --light: #f9f9f9;
      --dark: #333;
      --good: #d4edda;
      --medium: #fff3cd;
      --bad: #f8d7da;
    }
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      margin: 0;
      background: var(--light);
      color: var(--dark);
    }
    header {
      background: var(--primary);
      color: white;
      padding: 20px;
      text-align: center;
    }
    header img {
      height: 70px;
      margin-bottom: 8px;
    }
    header h1 {
      margin: 0;
      font-size: 22px;
    }
    header p {
      margin: 0;
      font-size: 14px;
      color: var(--accent);
    }
    form {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      max-width: 1100px;
      margin: 20px auto;
      box-shadow: 0 6px 16px rgba(0,0,0,0.1);
    }
    fieldset {
      margin-top: 20px;
      padding: 15px;
      border-radius: 10px;
      border: 2px solid var(--accent);
    }
    legend {
      font-weight: bold;
      padding: 0 10px;
      color: var(--primary);
    }
    label {
      font-weight: bold;
      color: var(--primary);
    }
    input, select, textarea {
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 6px;
      width: 100%;
      box-sizing: border-box;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      overflow-x: auto;
      display: block;
    }
    th, td {
      border: 1px solid #aaa;
      padding: 8px;
      font-size: 13px;
      vertical-align: top;
      text-align: left;
    }
    th {
      text-align: center;
      background: var(--accent);
      color: var(--primary);
    }
    .good { background: var(--good); }
    .medium { background: var(--medium); }
    .bad { background: var(--bad); }

    button {
      margin-top: 20px;
      width: 100%;
      padding: 14px;
      background: var(--primary);
      color: white;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    button:hover {
      background: var(--accent);
      color: var(--primary);
    }
    #loading {
      display:none;
      text-align:center;
      margin-top:10px;
      font-weight:bold;
      color:var(--primary);
    }

    /* Responsif untuk HP */
    @media (max-width: 768px) {
      table, thead, tbody, th, td, tr {
        display: block;
      }
      th {
        display: none;
      }
      td {
        border: none;
        border-bottom: 1px solid #eee;
        padding: 10px;
      }
      td input, td select {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="1.png" alt="Logo KemenPKP">
    <h1>Form Verifikasi Penerima Bantuan (II-3)</h1>
    <p>Kementerian Perumahan dan Kawasan Permukiman</p>
  </header>

  <form id="verlapForm" enctype="multipart/form-data">
    <!-- Identitas -->
    <fieldset>
      <legend>Identitas</legend>
      <table>
        <tr><td>Nama KK</td><td><input type="text" name="nama" required></td><td>Penghasilan KK per bulan (Rp)</td><td><input type="number" name="penghasilan"></td></tr>
        <tr><td>NIK</td><td><input type="text" name="nik"></td><td>Nilai UMP / UMK (Rp)</td><td><input type="number" name="ump"></td></tr>
        <tr><td>Nomor KK</td><td><input type="text" name="kk"></td><td>Pernah dapat BSPS</td><td><select name="pernah_bsps"><option>Ya</option><option>Tidak</option></select></td></tr>
        <tr><td>Jenis Kelamin</td><td><select name="jk"><option value="L">Laki-laki</option><option value="P">Perempuan</option></select></td><td>Tahun dapat BSPS</td><td><input type="number" name="tahun_bsps" value="0"></td></tr>
        <tr><td>Umur</td><td><input type="number" name="umur"></td><td>Berapa tahun menempati rumah</td><td><input type="number" name="tahun_huni"></td></tr>
        <tr><td>Alamat</td><td><input type="text" name="alamat"></td><td>Memiliki aset rumah lainnya</td><td><select name="aset_rumah"><option>Ya</option><option>Tidak</option></select></td></tr>
        <tr><td>RT/RW</td><td><input type="text" name="rt_rw"></td><td>Jumlah penghuni (jiwa)</td><td><input type="number" name="jml_penghuni"></td></tr>
        <tr><td>Desa/Kelurahan</td><td><input type="text" name="desa"></td><td>Luas rumah (m²)</td><td><input type="number" name="luas_rumah" step="0.1"></td></tr>
        <tr><td>Kecamatan</td><td><input type="text" name="kecamatan"></td><td>Bersedia mengikuti program</td><td><select name="bersedia"><option>Ya</option><option>Tidak</option></select></td></tr>
        <tr><td>Kabupaten/Kota</td><td><input type="text" name="kabupaten"></td><td>Titik koordinat</td><td><input type="text" name="koordinat"></td></tr>
        <tr><td>Provinsi</td><td><input type="text" name="provinsi"></td><td></td><td></td></tr>
      </table>
    </fieldset>

    <!-- Checklist Kondisi Rumah -->
    <fieldset>
      <legend>Checklist Kondisi Rumah</legend>
      <table>
        <tr>
          <th>Aspek/Komponen</th>
          <th class="good">A</th>
          <th class="medium">B</th>
          <th class="bad">C</th>
        </tr>
        <tr>
          <td><b>1. STRUKTUR</b></td><td colspan="3"></td>
        </tr>
        <tr>
          <td>Pondasi</td>
          <td class="good"><input type="radio" name="pondasi" value="A"> ada, kondisi baik, kokoh</td>
          <td class="medium"><input type="radio" name="pondasi" value="B"> ada, sebagian rapuh</td>
          <td class="bad"><input type="radio" name="pondasi" value="C"> tidak ada, rapuh</td>
        </tr>
        <!-- Checklist lainnya (sloof, kolom, ring balok, dinding, lantai, dst.) tetap sama -->
      </table>
    </fieldset>

    <!-- Upload Foto -->
    <fieldset>
      <legend>Upload Dokumen & Foto</legend>
      <table>
        <tr><td>Foto KTP</td><td><input type="file" name="foto_ktp" accept="image/*" capture="environment" required></td></tr>
        <tr><td>Foto KK</td><td><input type="file" name="foto_kk" accept="image/*" capture="environment" required></td></tr>
        <tr><td>TFL Selfi Depan Rumah</td><td><input type="file" name="tfl_selfi" accept="image/*" capture="environment"></td></tr>
        <tr><td>Foto Tampak Depan</td><td><input type="file" name="foto_depan" accept="image/*" capture="environment"></td></tr>
        <!-- Upload lainnya tetap sama -->
      </table>
    </fieldset>

    <button type="submit">Kirim Data</button>
    <div id="loading">⏳ Mengirim data, mohon tunggu...</div>
  </form>

  <script>
    const form = document.getElementById("verlapForm");
    const loading = document.getElementById("loading");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      const scriptURL = "PASTE_YOUR_APPS_SCRIPT_URL"; // Ganti dengan URL Web App dari Apps Script

      loading.style.display = "block";

      try {
        const res = await fetch(scriptURL, { method: "POST", body: formData });
        const txt = await res.text();
        loading.style.display = "none";

        if (txt.includes("SUCCESS")) {
          alert("✅ Data berhasil dikirim!");
          form.reset();
        } else {
          alert("❌ Gagal: " + txt);
        }
      } catch (err) {
        loading.style.display = "none";
        alert("⚠️ Error: " + err);
      }
    });
  </script>
</body>
</html>
